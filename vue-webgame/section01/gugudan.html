<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>구구단</title>
    <!-- Vue 2 CDN -->
    <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
</head>
<!--
- 바뀌는 부분을 중점적으로 생각해야 하고 그걸 data에 넣어서 관리해야 한다.
-->
<body>
    <div id="root">
        <div>{{ num1 }} 곱하기 {{ num2 }} 는?</div>
        <form @submit.prevent="onSubmitForm">
            <input type="number" v-model.number="inputValue" ref="refInput" />
            <!-- 
                v-model 을 통해서 data의 inputValue와 연결되어 있음 
                => 양뱡향 바인딩
                => inputValue가 바뀌면 data의 inputValue도 바뀌고, data의 inputValue가 바뀌면 inputValue도 바뀐다.
             -->
            <!-- <div>inputValue : {{ inputValue }}</div> -->
            <button type="submit">입력</button>
        </form>
        <div>{{ resultStr }}</div>
    </div>
</body>
<script>
    const app = new Vue({
        el: '#root',
        data: {
            num1: Math.ceil(Math.random() * 9),    // 첫 번째 수 : 1~9 중 랜덤하게 나오게 설정
            num2: Math.ceil(Math.random() * 9),    // 두 번째 수 : 1~9 중 랜덤하게 나오게 설정
            inputValue: '',    // 입력값 
            resultStr : '',    // 구구단 결과값
        },
        methods: {
            onSubmitForm() {
                if (this.inputValue == '') {
                    alert('값을 입력해주세요.');
                    // ref는 태그에 직접 접근해야 될때 사용함
                    // 너무 많이 사용하는 것은 안 좋음
                    this.$refs.refInput.focus();
                    return false;
                }

                const answer = this.num1 * this.num2;
                
                if (this.inputValue === answer) {
                    this.resultStr = '정답입니다!';
                    
                    this.inputValue = '';
                    
                    // 구구단 문제 다시 내기
                    this.num1 = Math.ceil(Math.random() * 9);
                    this.num2 = Math.ceil(Math.random() * 9);
                } else {
                    this.resultStr = '오답입니다!';
                    this.$refs.refInput.focus();
                }
            },
        },
    });
</script>
</html>
