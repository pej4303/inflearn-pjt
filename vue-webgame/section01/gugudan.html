<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>구구단</title>
    <!-- Vue 3 CDN -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
</head>
<!--
- 바뀌는 부분을 중점적으로 생각해야 하고 그걸 data에 넣어서 관리해야 한다.
-->
<body>
    <div id="root">
        <div>{{ num1 }} 곱하기 {{ num2 }} 는?</div>
        <form @submit.prevent="onSubmitForm">
            <input type="number" v-model.number="inputValue" ref="refInput" />
            <!-- 
                v-model 을 통해서 data의 inputValue와 연결되어 있음 
                => 양뱡향 바인딩
                => inputValue가 바뀌면 data의 inputValue도 바뀌고, data의 inputValue가 바뀌면 inputValue도 바뀐다.
             -->
            <!-- <div>inputValue : {{ inputValue }}</div> -->
            <button type="submit">입력</button>
        </form>
        <div>{{ resultStr }}</div>
    </div>
</body>
<script>
    const { ref } = Vue;

    const app = Vue.createApp({
        setup() {
            const num1 = ref(Math.ceil(Math.random() * 9)); // 첫 번째 수 : 1~9 중 랜덤하게 나오게 설정
            const num2 = ref(Math.ceil(Math.random() * 9)); // 두 번째 수 : 1~9 중 랜덤하게 나오게 설정
            const inputValue = ref(null);   // 입력값 
            const resultStr = ref(''); // 구구단 결과값
            const refInput = ref(null);

            // Form 제출 이벤트
            const onSubmitForm = () => {
                // 숫자 타입일때
                if (!inputValue.value) {
                    alert('값을 입력해주세요.');
                    // ref는 태그에 직접 접근해야 될때 사용함
                    // 너무 많이 사용하는 것은 안 좋음
                    refInput.value.focus(); 
                    return false;
                }

                const answer = num1.value * num2.value;
                
                if (inputValue.value === answer) {
                    resultStr.value = '정답입니다!';
                    inputValue.value = '';
                    
                    // 구구단 문제 다시 내기
                    num1.value = Math.ceil(Math.random() * 9);
                    num2.value = Math.ceil(Math.random() * 9);
                } else {
                    resultStr.value = '오답입니다!';
                    refInput.value.focus();
                }
            };

            return {
                num1,
                num2,
                inputValue,
                resultStr,
                refInput,
                onSubmitForm,
            }
        }
    });

    app.mount('#root');
</script>
</html>
