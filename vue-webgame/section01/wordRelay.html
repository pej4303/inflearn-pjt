<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>끝말잇기</title>
    <!-- Vue 3 CDN -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
</head>
<body>
    <div id="root">
        <div>{{ word }}</div>
        <form @submit.prevent="onSubmitForm">
            <input type="text" v-model="inputValue" ref="refInput" />
            <button type="submit">제출</button>
        </form>
        <div>{{ resultStr }}</div>
    </div>
</body>
<script>
    const { ref, nextTick } = Vue;

    const app = Vue.createApp({
      setup() {
        const word = ref('제로초');     // 제시어
        const inputValue = ref('');     // 입력값
        const resultStr = ref('');      // 결과값
        const refInput = ref(null);     // input DOM 참조

        const onSubmitForm = () => {
          if (inputValue.value === '') {
            alert('값을 입력해주세요.');
            refInput.value.focus();
            return;
          }

          if (inputValue.value.slice(0, 1) === word.value.slice(-1)) {
            word.value = inputValue.value;
            resultStr.value = '딩동댕!';
          } else {
            resultStr.value = '땡~!';
          }

          inputValue.value = '';
          nextTick(() => refInput.value.focus());
        };

        return {
          word,
          inputValue,
          resultStr,
          refInput,
          onSubmitForm
        };
      }
    });

    app.mount('#root');
</script>
</html>
