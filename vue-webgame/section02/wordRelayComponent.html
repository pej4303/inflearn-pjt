<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>끝말잇기 - Vue 2 컴포넌트</title>
    <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
</head>
<body>
  <div id="root">
    <!-- 끝말잇기 컴포넌트화 -->
    <word-relay init-word="판교"></word-relay>
    <word-relay init-word="휴가"></word-relay>
    <word-relay></word-relay>
  </div>
</body>
<script>
/*
- HTML은 대소문자를 구분하지 않기 때문에 Vue에서는 케밥케이스를 쓰도록 권장한다.
- Vue에서는 HTML에서 케밥케이스로 작성한 이름을 카멜케이스로 변환해서 JS코드에서 사용 할 수 있게 해준다.
*/
    Vue.component('word-relay', {
      // 컴포넌트 템플릿 규칙: 최상위 태그는 한 개여야 한다.
      template: `
        <div>
          <div>{{ word }}</div>
          <form @submit.prevent="onSubmitForm">
            <input type="text" v-model.trim="inputValue" placeholder="단어를 입력하세요" ref="refInput" autocomplete="off" />
            <button type="submit">입력</button>
          </form>
          <div>{{ resultStr }}</div>
          <br />
        </div>
      `,
      /*
      - props 사용 목적 : 부모 컴포넌트 > 자식 컴포넌트로 정보를 넘겨줄때 사용한다.
                        ex) props: ['initWord']
      */
      props: {
        initWord: {
          type: String,
          default: '제로초',
        },
      },
      /*
      - 컴포넌트에서 data를 함수로 정의하는 이유 : 
        각 컴포넌트 인스턴스별 독립적인 데이터를 가지도록 하기 위해서이다.
        같은 객체를 공유하지 못하게 항상 새로운 객체를 만들어서 반환해줘야 한다.
      */
      data() {
        return {
          word: this.initWord,// 제시어
          inputValue: '', // 입력한 단어
          resultStr: '' // 결과
        };
      },
      methods: {
        onSubmitForm() {
          if (!this.inputValue) {
            alert('단어를 입력해주세요.');
            this.$refs.refInput.focus();
            return;
          }

          if (this.inputValue.slice(0, 1) === this.word.slice(-1)) {
            this.word = this.inputValue;
            this.resultStr = '딩동댕';
          } else {
            this.resultStr = '땡~!';
          }

          this.inputValue = '';
          this.$nextTick(() => this.$refs.refInput.focus());
        }
      }
    });
</script>
<script>
  const app = new Vue({
    el: '#root'
  });
</script>
</html>